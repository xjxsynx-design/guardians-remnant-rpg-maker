/* Guardians' Remnant â€“ World Builder (Mobile-first) */

:root{
  --bg:#111;
  --panel:#202020;
  --panel2:#222;
  --panel3:#1b1b1b;
  --text:#eee;
  --muted:#aaa;

  --blue:#2196f3;
  --red:#e53935;

  --gridLine: rgba(255,255,255,.12);
  --gridLine2: rgba(0,0,0,.35);
  --tileBase:#333;

  /* Touch targets */
  --btnPadY:10px;
  --btnPadX:16px;

  /* Palette size (mobile-friendly) */
  --swatch:64px;
}

*{ box-sizing:border-box; }

body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  background: var(--bg);
  color: var(--text);
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
}

header {
  text-align: center;
  padding: 10px;
  background: var(--panel3);
  width: 100%;
}

#status {
  text-align: center;
  padding: 8px 10px;
  background: #181818;
  font-size: 14px;
  width: 100%;
  color: var(--muted);
}

#modeToggle, #saveLoad {
  display: flex;
  justify-content: center;
  gap: 10px;
  padding: 10px;
  background: var(--panel);
  width: 100%;
  flex-wrap: wrap;
}

#modeToggle button, #saveLoad button {
  padding: var(--btnPadY) var(--btnPadX);
  border: none;
  border-radius: 10px;
  background: #444;
  color: white;
  cursor: pointer;
  font-size: 15px;
  -webkit-tap-highlight-color: transparent;
}

#modeToggle button:active,
#saveLoad button:active {
  transform: translateY(1px);
}

.mode-btn.mode-active {
  background: var(--blue);
  box-shadow: 0 0 6px rgba(33,150,243,.7);
}

#eraserBtn.mode-active {
  background: var(--red);
  box-shadow: 0 0 8px rgba(229,57,53,.8);
  color: white;
}

#workspace {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  max-width: 820px;
  margin: 0 auto;
  padding: 10px 0 24px;
}

#biomes, #palette {
  display: flex;
  gap: 10px;
  padding: 10px;
  background: var(--panel2);
  overflow-x: auto;
  width: 100%;
  justify-content: center;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
}

#biomes button{
  scroll-snap-align: start;
}

button.active {
  background: #4caf50;
  font-weight: 700;
}

/* Palette tiles */
.palette-tile {
  width: var(--swatch);
  height: var(--swatch);
  border-radius: 10px;
  border: 2px solid transparent;
  flex-shrink: 0;
  cursor: pointer;
  transition: transform 0.08s;
  scroll-snap-align: start;
  box-shadow: 0 2px 0 rgba(0,0,0,.35);
}

.palette-tile.selected {
  border-color: #fff;
  transform: scale(1.06);
  outline: 2px solid rgba(255,255,255,.12);
  outline-offset: 2px;
}

.palette-tile.eraser {
  background: #111;
  border: 2px dashed var(--red);
  position: relative;
}

.palette-tile.eraser::after{
  content:"";
  position:absolute;
  inset: 14px;
  border-radius: 8px;
  border: 2px solid rgba(229,57,53,.35);
}

/* Map workspace */
#map {
  width: 100%;
  max-width: 820px;
  background: var(--tileBase);
  border-radius: 12px;
  overflow: hidden;
  touch-action: manipulation;

  display: grid;
  grid-template-columns: repeat(10, 1fr);
}

.tile {
  position: relative;
  background: var(--tileBase);

  /* THE KEY FIX: keep tiles square without JS sizing */
  aspect-ratio: 1 / 1;

  /* Grid lines (visible) */
  outline: 1px solid var(--gridLine2);
}

/* subtle overlay grid (polished look) */
#map::before{
  content:"";
  pointer-events:none;
  position:absolute;
  inset:0;
}

/* Objects inside tile */
.object {
  position: absolute;
  inset: 10%;
  border-radius: 6px;
  opacity: 0.92;
  box-shadow: inset 0 0 0 2px rgba(0,0,0,.25);
}

/* Make the map container position relative for overlays */
#map{ position: relative; }
